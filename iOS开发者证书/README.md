## iOS开发者证书
---

> 前者挖坑，后来者填坑。关于开发者账号申请、应用创建、证书创建以及应用上传等具体流程已有很多参考；这里只记录自己想记录的关键点。

* 证书种类和功能


**开发环境的调试证书**

> 证书作用：认证开发者电脑，已注册过得移动设备可连接该电脑，直接测试应用程序。通俗理解，该证书使电脑已经经过了认证，从而具备了把应用程序运行在真机上的能力。在电脑上安装之后，可导出 P12 文件，将该文件发给其他开发者并安装之后，安装该文件的电脑同样可以具备真机调试能力。

> 证书制作：CSR 文件。

**开发环境的推送证书**

> 证书作用：开发环境当中，倘若想要测试推送(远程推送)功能，该证书需要提交给后台。开发中一般上传到友盟、极光或个推相应的设置中。

> 证书制作：APPID + CSR 文件。

**生产环境的发布证书**

> 证书作用：经该证书认证的电脑（制作该证书过程中选取了该电脑的CSR文件并最终将制作好的证书安装在该电脑上，只有这样，该电脑才算已经认证），才具备发布应用的能力。该证书不可导出，即便导出也不可是其他设备具备发布应用的能力。

> 证书制作：CSR 文件。

**生产环境的推送证书**

> 证书作用：应用发布到应用市场之后的推送能力需要配置该证书。

> 证书制作：APPID + CSR 文件。


* 注册设备

> 理解：将未发布的应用运行在设备（这里主要指手机）上，并不是只需要认证电脑，而且还需认证设备。通俗理解，同一个开发者账号下，在一台电脑上制作开发环境的证书之后，还需要要将测试手机注册进该账号体系下。注册方式就是将手机的 UUID 添加进账号体系下。

> 注册：设备（手机）的 UUID 。

* 注册应用

> 理解：同注册设备相似，应用需要将自己的唯一标识注册进账号体系下。

> 注册：bunldle id ,也可以设置成通配符。

* 制作描述文件（配置文件）

**开发环境的描述文件**

> 理解：我们上面已经认识了，在同一个账号下制作了证书、注册了设备（手机或iPad）、注册了应用，但相互之间都是相互独立的操作，并没有直接的关联，该操作就是将三个直接联系在一起。

> 制作：已注册的APPID(通过名字选取) + 已制作的开发环境的证书 + 已注册的设备(通过名字选取)。

**开发环境的描述文件**

> 理解：我们上面已经认识了，在同一个账号下制作了证书、注册了设备（手机或iPad）、注册了应用，但相互之间都是相互独立的操作，并没有直接的关联，该操作就是将三个直接联系在一起。

> 制作：已注册的APPID(通过名字选取) + 已制作的发布环境的证书 + 已注册的设备(通过名字选取)。

---
##### 应用发布大概流程

1. 发布应用，首先你需要一个账号。[Apple 开发者中心](https://developer.apple.com)

2. 新建一个 APP 应用 ：基本信息的填写需要准备 Xcode 的 bundle identifier 等信息；App 价格与销售范围信息填写，价格大多为免费，没有必要支持预定(支持也可以)，所有地区，可提供教育机构批量购买折扣，其中有一项是 bitcode 编译 （需要时情况而定）。

3. 证书制作。

  3.1 发布证书 (开发者证书类似，推送证书多一步选择 bundle identifier。一个开发者账号可以制作的发布证书大概为 3 个)
App Store and Ad Hoc ---> CSR 文件 ---> Download 下载，双击安装 (可导出 p12 文件给其他开发者)

  3.2 注册 APP ID 。
name/id ---> 所需功能  ---> Register

  3.3 创建iOS Provisoning Profiles 描述文件。
App Store ---> 选择已注册的 APP ID ---> 发布证书 ---> 描述文件命名 ---> Download 下载，双击安装

4. 构建新版本，完善版本信息，上传 .ipa 包 ;安装的 Xcode 必须为正式版，beta 版本的 Xcode 不能上传项目到 App Store 。

5. 保存修改，提交审核。



> 补充：
1. bitcode 设置
Xcode 7 之后新建 iOS 工程， bitcode 选项默认设置为 TRUE , Xcode 中的设置 Targes -> Build Settings -> Enable BitCode。

> 2. bitcode 原理
LLVM 是目前苹果采用的编译器工具链,Bitcode是LLVM编译器的中间代码的一种编码,LLVM的前端可以理解为 C/C++/OC/Swift 等编程语言,LLVM的后端可以理解为各个芯片平台上的汇编指令或者可执行机器指令数据,那么,BitCode 就是位于这两者直接的中间码。
LLVM 的编译工作原理是前端负责把项目程序源代码翻译成 Bitcode 中间码,然后再根据不同目标机器芯片平台转换为相应的汇编指令以及翻译为机器码。这样设计就可以让 LLVM 成为了一个编译器架构,可以轻而易举的在 LLVM 架构之上发明新的语言(前端),以及在 LLVM 架构下面支持新的 CPU (后端)指令输出,虽然 Bitcode 仅仅只是一个中间码不能在任何平台上运行,但是它可以转化为任何被支持的 CPU 架构,包括现在还没被发明的 CPU 架构,也就是说现在打开 Bitcode 功能提交一个 App 到应用商店,以后如果苹果新出了一款手机并 CPU 也是全新设计的,在苹果后台服务器一样可以从这个 App 的 Bitcode 开始编译转化为新 CPU 上的可执行程序,可供新手机用户下载运行这个App。




##### 参考

* [iOS真机测试流程(完整版)](https://www.jianshu.com/p/ae7110f2f7d9)

* [iOS 证书的理解](https://www.jianshu.com/p/86748f895026)

* [友盟推送-iOS证书配置](https://developer.umeng.com/docs/66632/detail/66748)
